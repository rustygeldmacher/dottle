#!/bin/bash

if [[ "$1" == "--help" ]]; then
  echo "Show all topics being used"
  exit 0
fi

command=$1
if [[ -z "$command" ]]; then
  command=list
fi

usings=$DOTTLE_HOME/topics/topics-enabled
if [[ ! -e "$usings" ]]; then
  touch $usings
fi

case "$command" in
  list)
    if [[ -t 1 ]]; then
      echo Using the following topics:
    fi
    for topic in $(cat $usings)
    do
      if [[ ! -z $topic ]]; then
        if [[ -t 1 ]]; then
          echo "* $topic"
        else
          echo $topic
        fi
      fi
    done
    ;;
  edit)
    $EDITOR $usings
    ;;
esac

